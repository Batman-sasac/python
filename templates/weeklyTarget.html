<div class="goal-section" style="background: #e7f3ff; padding: 15px; border-radius: 10px; margin-bottom: 20px;">
    <strong>ğŸ“… ì£¼ê°„ í•™ìŠµ ëª©í‘œ ì„¤ì •:</strong>
    <input type="number" id="weeklyTarget" min="1" max="7" value="3" style="width: 50px; padding: 5px;"> íšŒ
    <button class="btn" onclick="saveGoal()" style="background: var(--primary); color: white; padding: 5px 10px;">ì„¤ì •
        ì €ì¥</button>
    <p id="goalStatus" style="font-size: 0.8rem; margin-top: 5px; color: #555;">ì´ë²ˆ ì£¼ í•™ìŠµ íšŸìˆ˜: <span
            id="thisWeekCount">0</span>íšŒ</p>
</div>

<script>
    // ëª©í‘œ ì €ì¥ í•¨ìˆ˜
    async function saveGoal() {
        const target = document.getElementById('weeklyTarget').value;
        const res = await fetch("/quiz/set-goal", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ weekly_target: target })
        });
        const data = await res.json();
        alert(data.message);
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ í˜„ì¬ ë‹¬ì„±ë„ ì¡°íšŒ (ìœ„ì—ì„œ ë§í•œ 'ì¡°íšŒ' ì—°ë™)
    window.onload = async function () {
        const res = await fetch("/quiz/my-status");
        const data = await res.json();
        if (data.weekly_count !== undefined) {
            document.getElementById('thisWeekCount').innerText = data.weekly_count;
            document.getElementById('weeklyTarget').value = data.weekly_target || 3;
        }
    }
</script>