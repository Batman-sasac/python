<div class="study-setting-card">
    <h3>ğŸ“… ì›”ê°„ í•™ìŠµ ê³„íš</h3>
    <p>ì´ í€´ì¦ˆë¥¼ í•œ ë‹¬ ë™ì•ˆ ëª‡ ë²ˆ ë³µìŠµí•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>

    <div class="input-group">
        <input type="number" id="reviewCount" min="1" max="30" value="4">
        <span>ë²ˆ ë³µìŠµí•˜ê¸°</span>
    </div>

    <p class="hint">* 30ì¼ ê¸°ì¤€ìœ¼ë¡œ ê· ë“±í•˜ê²Œ ë°°ì •ë©ë‹ˆë‹¤.</p>

    <button type="button" onclick="saveMonthlyPlan()" class="btn-save">í•™ìŠµ ê³„íš í™•ì •</button>
</div>

<script>
    async function saveMonthlyPlan() {
        const quizId = document.getElementById('result-area').dataset.quizId;
        const count = document.getElementById('reviewCount').value;

        if (!quizId) return alert("ì €ì¥ëœ í€´ì¦ˆê°€ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ì €ì¥í•´ì£¼ì„¸ìš”!");

        try {
            const response = await fetch("/ocr/set-monthly-plan", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({
                    quiz_id: quizId,
                    total_count: parseInt(count)
                })
            });

            const result = await response.json();
            if (result.status === "success") {
                alert(`âœ… ì„¤ì • ì™„ë£Œ! í•œ ë‹¬ ë™ì•ˆ ${count}íšŒì˜ í•™ìŠµ ì¼ì •ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.`);
                console.log("ìƒì„±ëœ ë‚ ì§œë“¤:", result.scheduled_dates);
            }
        } catch (e) {
            alert("ì¼ì • ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
    }
</script>